(()=>{var J=class{constructor(e,t,s){this.eventTarget=e,this.eventName=t,this.eventOptions=s,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=Ze(e);for(let s of this.bindings){if(t.immediatePropagationStopped)break;s.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let s=e.index,r=t.index;return s<r?-1:s>r?1:0})}};function Ze(n){if("immediatePropagationStopped"in n)return n;{let{stopImmediatePropagation:e}=n;return Object.assign(n,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var G=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,s={}){this.application.handleError(e,`Error ${t}`,s)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:s,eventOptions:r}=e,i=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(s,r);i.delete(o),i.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:s,eventOptions:r}=e;return this.fetchEventListener(t,s,r)}fetchEventListener(e,t,s){let r=this.fetchEventListenerMapForEventTarget(e),i=this.cacheKey(t,s),o=r.get(i);return o||(o=this.createEventListener(e,t,s),r.set(i,o)),o}createEventListener(e,t,s){let r=new J(e,t,s);return this.started&&r.connect(),r}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let s=[e];return Object.keys(t).sort().forEach(r=>{s.push(`${t[r]?"":"!"}${r}`)}),s.join(":")}},et={stop({event:n,value:e}){return e&&n.stopPropagation(),!0},prevent({event:n,value:e}){return e&&n.preventDefault(),!0},self({event:n,value:e,element:t}){return e?t===n.target:!0}},tt=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function st(n){let t=n.trim().match(tt)||[],s=t[1],r=t[2];return r&&!["keydown","keyup","keypress"].includes(s)&&(s+=`.${r}`,r=""),{eventTarget:nt(t[3]),eventName:s,eventOptions:t[6]?rt(t[6]):{},identifier:t[4],methodName:t[5],keyFilter:r}}function nt(n){if(n=="window")return window;if(n=="document")return document}function rt(n){return n.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function it(n){if(n==window)return"window";if(n==document)return"document"}function be(n){return n.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function X(n){return be(n.replace(/--/g,"-").replace(/__/g,"_"))}function j(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Se(n){return n.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function ot(n){return n.match(/[^\s]+/g)||[]}var Y=class{constructor(e,t,s,r){this.element=e,this.index=t,this.eventTarget=s.eventTarget||e,this.eventName=s.eventName||ct(e)||U("missing event name"),this.eventOptions=s.eventOptions||{},this.identifier=s.identifier||U("missing identifier"),this.methodName=s.methodName||U("missing method name"),this.keyFilter=s.keyFilter||"",this.schema=r}static forToken(e,t){return new this(e.element,e.index,st(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}isFilterTarget(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+"),s=["meta","ctrl","alt","shift"],[r,i,o,c]=s.map(l=>t.includes(l));if(e.metaKey!==r||e.ctrlKey!==i||e.altKey!==o||e.shiftKey!==c)return!0;let a=t.filter(l=>!s.includes(l))[0];return a?(Object.prototype.hasOwnProperty.call(this.keyMappings,a)||U(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[a].toLowerCase()!==e.key.toLowerCase()):!1}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:s,value:r}of Array.from(this.element.attributes)){let i=s.match(t),o=i&&i[1];o&&(e[be(o)]=at(r))}return e}get eventTargetName(){return it(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}},$e={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:n=>n.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function ct(n){let e=n.tagName.toLowerCase();if(e in $e)return $e[e](n)}function U(n){throw new Error(n)}function at(n){try{return JSON.parse(n)}catch{return n}}var Z=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){this.willBeInvokedByEvent(e)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:s}=this.context.application,r=!0;for(let[i,o]of Object.entries(this.eventOptions))if(i in s){let c=s[i];r=r&&c({name:i,value:o,event:e,element:t})}else continue;return r}invokeWithEvent(e){let{target:t,currentTarget:s}=e;try{let{params:r}=this.action,i=Object.assign(e,{params:r});this.method.call(this.controller,i),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:s,action:this.methodName})}catch(r){let{identifier:i,controller:o,element:c,index:a}=this,l={identifier:i,controller:o,element:c,index:a,event:e};this.context.handleError(r,`invoking action "${this.action}"`,l)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.isFilterTarget(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},R=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(s=>this.processMutations(s))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){let s=e;this.elements.has(s)?this.delegate.elementAttributeChanged&&this.matchElement(s)?this.delegate.elementAttributeChanged(s,t):this.removeElement(s):this.matchElement(s)&&this.addElement(s)}processRemovedNodes(e){for(let t of Array.from(e)){let s=this.elementFromNode(t);s&&this.processTree(s,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let s=this.elementFromNode(t);s&&this.elementIsActive(s)&&this.processTree(s,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let s of this.matchElementsInTree(e))t.call(this,s)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},ee=class{constructor(e,t,s){this.attributeName=t,this.delegate=s,this.elementObserver=new R(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],s=Array.from(e.querySelectorAll(this.selector));return t.concat(s)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function lt(n,e,t){Ve(n,e).add(t)}function ht(n,e,t){Ve(n,e).delete(t),ut(n,e)}function Ve(n,e){let t=n.get(e);return t||(t=new Set,n.set(e,t)),t}function ut(n,e){let t=n.get(e);t!=null&&t.size==0&&n.delete(e)}var A=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,s)=>t.concat(Array.from(s)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,s)=>t+s.size,0)}add(e,t){lt(this.valuesByKey,e,t)}delete(e,t){ht(this.valuesByKey,e,t)}has(e,t){let s=this.valuesByKey.get(e);return s!=null&&s.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(s=>s.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,s])=>s.has(e)).map(([t,s])=>t)}};var te=class{constructor(e,t,s,r={}){this.selector=t,this.details=r,this.elementObserver=new R(e,this),this.delegate=s,this.matchesByElement=new A}get started(){return this.elementObserver.started}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let t=e.matches(this.selector);return this.delegate.selectorMatchElement?t&&this.delegate.selectorMatchElement(e,this.details):t}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],s=Array.from(e.querySelectorAll(this.selector)).filter(r=>this.matchElement(r));return t.concat(s)}elementMatched(e){this.selectorMatched(e)}elementUnmatched(e){this.selectorUnmatched(e)}elementAttributeChanged(e,t){let s=this.matchElement(e),r=this.matchesByElement.has(this.selector,e);!s&&r&&this.selectorUnmatched(e)}selectorMatched(e){this.delegate.selectorMatched&&(this.delegate.selectorMatched(e,this.selector,this.details),this.matchesByElement.add(this.selector,e))}selectorUnmatched(e){this.delegate.selectorUnmatched(e,this.selector,this.details),this.matchesByElement.delete(this.selector,e)}},se=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(s=>this.processMutations(s))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let s=this.delegate.getStringMapKeyForAttribute(e);if(s!=null){this.stringMap.has(e)||this.stringMapKeyAdded(s,e);let r=this.element.getAttribute(e);if(this.stringMap.get(e)!=r&&this.stringMapValueChanged(r,s,t),r==null){let i=this.stringMap.get(e);this.stringMap.delete(e),i&&this.stringMapKeyRemoved(s,e,i)}else this.stringMap.set(e,r)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,s){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,s)}stringMapKeyRemoved(e,t,s){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,s)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},z=class{constructor(e,t,s){this.attributeObserver=new ee(e,t,this),this.delegate=s,this.tokensByElement=new A}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,s]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(s)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),s=this.readTokensForElement(e),r=ft(t,s).findIndex(([i,o])=>!mt(i,o));return r==-1?[[],[]]:[t.slice(r),s.slice(r)]}readTokensForElement(e){let t=this.attributeName,s=e.getAttribute(t)||"";return dt(s,e,t)}};function dt(n,e,t){return n.trim().split(/\s+/).filter(s=>s.length).map((s,r)=>({element:e,attributeName:t,content:s,index:r}))}function ft(n,e){let t=Math.max(n.length,e.length);return Array.from({length:t},(s,r)=>[n[r],e[r]])}function mt(n,e){return n&&e&&n.index==e.index&&n.content==e.content}var q=class{constructor(e,t,s){this.tokenListObserver=new z(e,t,this),this.delegate=s,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:s}=this.fetchParseResultForToken(e);s&&(this.fetchValuesByTokenForElement(t).set(e,s),this.delegate.elementMatchedValue(t,s))}tokenUnmatched(e){let{element:t}=e,{value:s}=this.fetchParseResultForToken(e);s&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,s))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},ne=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new q(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new Z(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=Y.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},re=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new se(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let s=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,s.writer(this.receiver[e]),s.writer(s.defaultValue))}stringMapValueChanged(e,t,s){let r=this.valueDescriptorNameMap[t];e!==null&&(s===null&&(s=r.writer(r.defaultValue)),this.invokeChangedCallback(t,e,s))}stringMapKeyRemoved(e,t,s){let r=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,r.writer(this.receiver[e]),s):this.invokeChangedCallback(e,r.writer(r.defaultValue),s)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:s,writer:r}of this.valueDescriptors)s!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,r(s),void 0)}invokeChangedCallback(e,t,s){let r=`${e}Changed`,i=this.receiver[r];if(typeof i=="function"){let o=this.valueDescriptorNameMap[e];try{let c=o.reader(t),a=s;s&&(a=o.reader(s)),i.call(this.receiver,c,a)}catch(c){throw c instanceof TypeError&&(c.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${c.message}`),c}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let s=this.valueDescriptorMap[t];e[s.name]=s}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],s=`has${j(t.name)}`;return this.receiver[s]}},ie=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new A}start(){this.tokenListObserver||(this.tokenListObserver=new z(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var s;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(s=this.tokenListObserver)===null||s===void 0||s.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var s;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(s=this.tokenListObserver)===null||s===void 0||s.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function D(n,e){let t=Ke(n);return Array.from(t.reduce((s,r)=>(pt(r,e).forEach(i=>s.add(i)),s),new Set))}function gt(n,e){return Ke(n).reduce((s,r)=>(s.push(...vt(r,e)),s),[])}function Ke(n){let e=[];for(;n;)e.push(n),n=Object.getPrototypeOf(n);return e.reverse()}function pt(n,e){let t=n[e];return Array.isArray(t)?t:[]}function vt(n,e){let t=n[e];return t?Object.keys(t).map(s=>[s,t[s]]):[]}var oe=class{constructor(e,t){this.context=e,this.delegate=t,this.outletsByName=new A,this.outletElementsByName=new A,this.selectorObserverMap=new Map}start(){this.selectorObserverMap.size===0&&(this.outletDefinitions.forEach(e=>{let t=this.selector(e),s={outletName:e};t&&this.selectorObserverMap.set(e,new te(document.body,t,this,s))}),this.selectorObserverMap.forEach(e=>e.start())),this.dependentContexts.forEach(e=>e.refresh())}stop(){this.selectorObserverMap.size>0&&(this.disconnectAllOutlets(),this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}refresh(){this.selectorObserverMap.forEach(e=>e.refresh())}selectorMatched(e,t,{outletName:s}){let r=this.getOutlet(e,s);r&&this.connectOutlet(r,e,s)}selectorUnmatched(e,t,{outletName:s}){let r=this.getOutletFromMap(e,s);r&&this.disconnectOutlet(r,e,s)}selectorMatchElement(e,{outletName:t}){return this.hasOutlet(e,t)&&e.matches(`[${this.context.application.schema.controllerAttribute}~=${t}]`)}connectOutlet(e,t,s){var r;this.outletElementsByName.has(s,t)||(this.outletsByName.add(s,e),this.outletElementsByName.add(s,t),(r=this.selectorObserverMap.get(s))===null||r===void 0||r.pause(()=>this.delegate.outletConnected(e,t,s)))}disconnectOutlet(e,t,s){var r;this.outletElementsByName.has(s,t)&&(this.outletsByName.delete(s,e),this.outletElementsByName.delete(s,t),(r=this.selectorObserverMap.get(s))===null||r===void 0||r.pause(()=>this.delegate.outletDisconnected(e,t,s)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let s of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(s,t,e)}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}get outletDependencies(){let e=new A;return this.router.modules.forEach(t=>{let s=t.definition.controllerConstructor;D(s,"outlets").forEach(i=>e.add(i,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(s=>s.element===e)}get scope(){return this.context.scope}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},ce=class{constructor(e,t){this.logDebugActivity=(s,r={})=>{let{identifier:i,controller:o,element:c}=this;r=Object.assign({identifier:i,controller:o,element:c},r),this.application.logDebugActivity(this.identifier,s,r)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new ne(this,this.dispatcher),this.valueObserver=new re(this,this.controller),this.targetObserver=new ie(this,this),this.outletObserver=new oe(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(s){this.handleError(s,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,s={}){let{identifier:r,controller:i,element:o}=this;s=Object.assign({identifier:r,controller:i,element:o},s),this.application.handleError(e,`Error ${t}`,s)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,s){this.invokeControllerMethod(`${X(s)}OutletConnected`,e,t)}outletDisconnected(e,t,s){this.invokeControllerMethod(`${X(s)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let s=this.controller;typeof s[e]=="function"&&s[e](...t)}};function bt(n){return yt(n,Et(n))}function yt(n,e){let t=xt(n),s=Ot(n.prototype,e);return Object.defineProperties(t.prototype,s),t}function Et(n){return D(n,"blessings").reduce((t,s)=>{let r=s(n);for(let i in r){let o=t[i]||{};t[i]=Object.assign(o,r[i])}return t},{})}function Ot(n,e){return At(e).reduce((t,s)=>{let r=wt(n,e,s);return r&&Object.assign(t,{[s]:r}),t},{})}function wt(n,e,t){let s=Object.getOwnPropertyDescriptor(n,t);if(!(s&&"value"in s)){let i=Object.getOwnPropertyDescriptor(e,t).value;return s&&(i.get=s.get||i.get,i.set=s.set||i.set),i}}var At=(()=>typeof Object.getOwnPropertySymbols=="function"?n=>[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)]:Object.getOwnPropertyNames)(),xt=(()=>{function n(t){function s(){return Reflect.construct(t,arguments,new.target)}return s.prototype=Object.create(t.prototype,{constructor:{value:s}}),Reflect.setPrototypeOf(s,t),s}function e(){let s=n(function(){this.a.call(this)});return s.prototype.a=function(){},new s}try{return e(),n}catch{return s=>class extends s{}}})();function kt(n){return{identifier:n.identifier,controllerConstructor:bt(n.controllerConstructor)}}var ae=class{constructor(e,t){this.application=e,this.definition=kt(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new ce(this,e),this.contextsByScope.set(e,t)),t}},le=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return ot(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},he=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let s=this.getAttributeNameForKey(e);return this.element.setAttribute(s,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Se(e)}`}},ue=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,s){let r=this.warnedKeysByObject.get(e);r||(r=new Set,this.warnedKeysByObject.set(e,r)),r.has(t)||(r.add(t),this.logger.warn(s,e))}};function de(n,e){return`[${n}~="${e}"]`}var fe=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,s)=>t||this.findTarget(s)||this.findLegacyTarget(s),void 0)}findAll(...e){return e.reduce((t,s)=>[...t,...this.findAllTargets(s),...this.findAllLegacyTargets(s)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return de(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(s=>this.deprecate(s,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return de(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:s}=this,r=this.schema.targetAttribute,i=this.schema.targetAttributeForScope(s);this.guide.warn(e,`target:${t}`,`Please replace ${r}="${s}.${t}" with ${i}="${t}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},me=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,s)=>t||this.findOutlet(s),void 0)}findAll(...e){return e.reduce((t,s)=>[...t,...this.findAllOutlets(s)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))}matchesElement(e,t,s){let r=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&r.split(" ").includes(s)}},ge=class n{constructor(e,t,s,r){this.targets=new fe(this),this.classes=new le(this),this.data=new he(this),this.containsElement=i=>i.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=s,this.guide=new ue(r),this.outlets=new me(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return de(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new n(this.schema,document.documentElement,this.identifier,this.guide.logger)}},pe=class{constructor(e,t,s){this.element=e,this.schema=t,this.delegate=s,this.valueListObserver=new q(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:s}=e,r=this.fetchScopesByIdentifierForElement(t),i=r.get(s);return i||(i=this.delegate.createScopeForElementAndIdentifier(t,s),r.set(s,i)),i}elementMatchedValue(e,t){let s=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,s),s==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let s=this.scopeReferenceCounts.get(t);s&&(this.scopeReferenceCounts.set(t,s-1),s==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},ve=class{constructor(e){this.application=e,this.scopeObserver=new pe(this.element,this.schema,this),this.scopesByIdentifier=new A,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new ae(this.application,e);this.connectModule(t);let s=e.controllerConstructor.afterLoad;s&&s(e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let s=this.modulesByIdentifier.get(t);if(s)return s.contexts.find(r=>r.element==e)}handleError(e,t,s){this.application.handleError(e,t,s)}createScopeForElementAndIdentifier(e,t){return new ge(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(s=>e.connectContextForScope(s))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(s=>e.disconnectContextForScope(s))}},ye={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:n=>`data-${n}-target`,outletAttributeForScope:(n,e)=>`data-${n}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End"},Le("abcdefghijklmnopqrstuvwxyz".split("").map(n=>[n,n]))),Le("0123456789".split("").map(n=>[n,n])))};function Le(n){return n.reduce((e,[t,s])=>Object.assign(Object.assign({},e),{[t]:s}),{})}var W=class{constructor(e=document.documentElement,t=ye){this.logger=console,this.debug=!1,this.logDebugActivity=(s,r,i={})=>{this.debug&&this.logFormattedMessage(s,r,i)},this.element=e,this.schema=t,this.dispatcher=new G(this),this.router=new ve(this),this.actionDescriptorFilters=Object.assign({},et)}static start(e,t){let s=new this(e,t);return s.start(),s}async start(){await Tt(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>{r.controllerConstructor.shouldLoad&&this.router.loadDefinition(r)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>this.router.unloadIdentifier(r))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let s=this.router.getContextForElementAndIdentifier(e,t);return s?s.controller:null}handleError(e,t,s){var r;this.logger.error(`%s

%o

%o`,t,e,s),(r=window.onerror)===null||r===void 0||r.call(window,t,"",0,0,e)}logFormattedMessage(e,t,s={}){s=Object.assign({application:this},s),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},s)),this.logger.groupEnd()}};function Tt(){return new Promise(n=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>n()):n()})}function Mt(n){return D(n,"classes").reduce((t,s)=>Object.assign(t,Ft(s)),{})}function Ft(n){return{[`${n}Class`]:{get(){let{classes:e}=this;if(e.has(n))return e.get(n);{let t=e.getAttributeName(n);throw new Error(`Missing attribute "${t}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${j(n)}Class`]:{get(){return this.classes.has(n)}}}}function Ct(n){return D(n,"outlets").reduce((t,s)=>Object.assign(t,Bt(s)),{})}function Bt(n){let e=X(n);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(n);if(t){let s=this.application.getControllerForElementAndIdentifier(t,n);if(s)return s;throw new Error(`Missing "data-controller=${n}" attribute on outlet element for "${this.identifier}" controller`)}throw new Error(`Missing outlet element "${n}" for "${this.identifier}" controller`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(n);return t.length>0?t.map(s=>{let r=this.application.getControllerForElementAndIdentifier(s,n);if(r)return r;console.warn(`The provided outlet element is missing the outlet controller "${n}" for "${this.identifier}"`,s)}).filter(s=>s):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(n);if(t)return t;throw new Error(`Missing outlet element "${n}" for "${this.identifier}" controller`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(n)}},[`has${j(e)}Outlet`]:{get(){return this.outlets.has(n)}}}}function Nt(n){return D(n,"targets").reduce((t,s)=>Object.assign(t,$t(s)),{})}function $t(n){return{[`${n}Target`]:{get(){let e=this.targets.find(n);if(e)return e;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${j(n)}Target`]:{get(){return this.targets.has(n)}}}}function Lt(n){let e=gt(n,"values"),t={valueDescriptorMap:{get(){return e.reduce((s,r)=>{let i=Pe(r,this.identifier),o=this.data.getAttributeNameForKey(i.key);return Object.assign(s,{[o]:i})},{})}}};return e.reduce((s,r)=>Object.assign(s,jt(r)),t)}function jt(n,e){let t=Pe(n,e),{key:s,name:r,reader:i,writer:o}=t;return{[r]:{get(){let c=this.data.get(s);return c!==null?i(c):t.defaultValue},set(c){c===void 0?this.data.delete(s):this.data.set(s,o(c))}},[`has${j(r)}`]:{get(){return this.data.has(s)||t.hasCustomDefaultValue}}}}function Pe([n,e],t){return Kt({controller:t,token:n,typeDefinition:e})}function Ee(n){switch(n){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function L(n){switch(typeof n){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(n))return"array";if(Object.prototype.toString.call(n)==="[object Object]")return"object"}function Dt(n){let e=Ee(n.typeObject.type);if(!e)return;let t=L(n.typeObject.default);if(e!==t){let s=n.controller?`${n.controller}.${n.token}`:n.token;throw new Error(`The specified default value for the Stimulus Value "${s}" must match the defined type "${e}". The provided default value of "${n.typeObject.default}" is of type "${t}".`)}return e}function St(n){let e=Dt({controller:n.controller,token:n.token,typeObject:n.typeDefinition}),t=L(n.typeDefinition),s=Ee(n.typeDefinition),r=e||t||s;if(r)return r;let i=n.controller?`${n.controller}.${n.typeDefinition}`:n.token;throw new Error(`Unknown value type "${i}" for "${n.token}" value`)}function Vt(n){let e=Ee(n);if(e)return Pt[e];let t=n.default;return t!==void 0?t:n}function Kt(n){let e=`${Se(n.token)}-value`,t=St(n);return{type:t,key:e,name:be(e),get defaultValue(){return Vt(n.typeDefinition)},get hasCustomDefaultValue(){return L(n.typeDefinition)!==void 0},reader:It[t],writer:je[t]||je.default}}var Pt={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},It={array(n){let e=JSON.parse(n);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${n}" of type "${L(e)}"`);return e},boolean(n){return!(n=="0"||String(n).toLowerCase()=="false")},number(n){return Number(n)},object(n){let e=JSON.parse(n);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${n}" of type "${L(e)}"`);return e},string(n){return n}},je={default:_t,array:De,object:De};function De(n){return JSON.stringify(n)}function _t(n){return`${n}`}var E=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:s={},prefix:r=this.identifier,bubbles:i=!0,cancelable:o=!0}={}){let c=r?`${r}:${e}`:e,a=new CustomEvent(c,{detail:s,bubbles:i,cancelable:o});return t.dispatchEvent(a),a}};E.blessings=[Mt,Nt,Lt,Ct];E.targets=[];E.outlets=[];E.values={};var Oe=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function we(n,e,t,s){n.addEventListener?n.addEventListener(e,t,s):n.attachEvent&&n.attachEvent("on".concat(e),function(){t(window.event)})}function ze(n,e){for(var t=e.slice(0,e.length-1),s=0;s<t.length;s++)t[s]=n[t[s].toLowerCase()];return t}function qe(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");for(var e=n.split(","),t=e.lastIndexOf("");t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function Ut(n,e){for(var t=n.length>=e.length?n:e,s=n.length>=e.length?e:n,r=!0,i=0;i<t.length;i++)s.indexOf(t[i])===-1&&(r=!1);return r}var V={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Oe?173:189,"=":Oe?61:187,";":Oe?59:186,"'":222,"[":219,"]":221,"\\":220},w={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},ke={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},m={16:!1,18:!1,17:!1,91:!1},f={};for(S=1;S<20;S++)V["f".concat(S)]=111+S;var S,h=[],Ie=!1,We="all",Qe=[],H=function(e){return V[e.toLowerCase()]||w[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},Rt=function(e){return Object.keys(V).find(function(t){return V[t]===e})},zt=function(e){return Object.keys(w).find(function(t){return w[t]===e})};function He(n){We=n||"all"}function K(){return We||"all"}function qt(){return h.slice(0)}function Wt(){return h.map(function(n){return Rt(n)||zt(n)||String.fromCharCode(n)})}function Qt(n){var e=n.target||n.srcElement,t=e.tagName,s=!0;return(e.isContentEditable||(t==="INPUT"||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(s=!1),s}function Ht(n){return typeof n=="string"&&(n=H(n)),h.indexOf(n)!==-1}function Jt(n,e){var t,s;n||(n=K());for(var r in f)if(Object.prototype.hasOwnProperty.call(f,r))for(t=f[r],s=0;s<t.length;)t[s].scope===n?t.splice(s,1):s++;K()===n&&He(e||"all")}function Gt(n){var e=n.keyCode||n.which||n.charCode,t=h.indexOf(e);if(t>=0&&h.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&h.splice(0,h.length),(e===93||e===224)&&(e=91),e in m){m[e]=!1;for(var s in w)w[s]===e&&(x[s]=!1)}}function Xt(n){if(typeof n>"u")Object.keys(f).forEach(function(o){return delete f[o]});else if(Array.isArray(n))n.forEach(function(o){o.key&&Ae(o)});else if(typeof n=="object")n.key&&Ae(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];var r=t[0],i=t[1];typeof r=="function"&&(i=r,r=""),Ae({key:n,scope:r,method:i,splitKey:"+"})}}var Ae=function(e){var t=e.key,s=e.scope,r=e.method,i=e.splitKey,o=i===void 0?"+":i,c=qe(t);c.forEach(function(a){var l=a.split(o),b=l.length,p=l[b-1],d=p==="*"?"*":H(p);if(f[d]){s||(s=K());var k=b>1?ze(w,l):[];f[d]=f[d].filter(function(g){var O=r?g.method===r:!0;return!(O&&g.scope===s&&Ut(g.mods,k))})}})};function _e(n,e,t,s){if(e.element===s){var r;if(e.scope===t||e.scope==="all"){r=e.mods.length>0;for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(!m[i]&&e.mods.indexOf(+i)>-1||m[i]&&e.mods.indexOf(+i)===-1)&&(r=!1);(e.mods.length===0&&!m[16]&&!m[18]&&!m[17]&&!m[91]||r||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(h),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}}function Ue(n,e){var t=f["*"],s=n.keyCode||n.which||n.charCode;if(x.filter.call(this,n)){if((s===93||s===224)&&(s=91),h.indexOf(s)===-1&&s!==229&&h.push(s),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(g){var O=ke[g];n[g]&&h.indexOf(O)===-1?h.push(O):!n[g]&&h.indexOf(O)>-1?h.splice(h.indexOf(O),1):g==="metaKey"&&n[g]&&h.length===3&&(n.ctrlKey||n.shiftKey||n.altKey||(h=h.slice(h.indexOf(O))))}),s in m){m[s]=!0;for(var r in w)w[r]===s&&(x[r]=!0);if(!t)return}for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(m[i]=n[ke[i]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(h.indexOf(17)===-1&&h.push(17),h.indexOf(18)===-1&&h.push(18),m[17]=!0,m[18]=!0);var o=K();if(t)for(var c=0;c<t.length;c++)t[c].scope===o&&(n.type==="keydown"&&t[c].keydown||n.type==="keyup"&&t[c].keyup)&&_e(n,t[c],o,e);if(s in f){for(var a=0;a<f[s].length;a++)if((n.type==="keydown"&&f[s][a].keydown||n.type==="keyup"&&f[s][a].keyup)&&f[s][a].key){for(var l=f[s][a],b=l.splitKey,p=l.key.split(b),d=[],k=0;k<p.length;k++)d.push(H(p[k]));d.sort().join("")===h.sort().join("")&&_e(n,l,o,e)}}}}function Yt(n){return Qe.indexOf(n)>-1}function x(n,e,t){h=[];var s=qe(n),r=[],i="all",o=document,c=0,a=!1,l=!0,b="+",p=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(o=e.element),e.keyup&&(a=e.keyup),e.keydown!==void 0&&(l=e.keydown),e.capture!==void 0&&(p=e.capture),typeof e.splitKey=="string"&&(b=e.splitKey)),typeof e=="string"&&(i=e);c<s.length;c++)n=s[c].split(b),r=[],n.length>1&&(r=ze(w,n)),n=n[n.length-1],n=n==="*"?"*":H(n),n in f||(f[n]=[]),f[n].push({keyup:a,keydown:l,scope:i,mods:r,shortcut:s[c],method:t,key:s[c],splitKey:b,element:o});typeof o<"u"&&!Yt(o)&&window&&(Qe.push(o),we(o,"keydown",function(d){Ue(d,o)},p),Ie||(Ie=!0,we(window,"focus",function(){h=[]},p)),we(o,"keyup",function(d){Ue(d,o),Gt(d)},p))}function Zt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(f).forEach(function(t){var s=f[t].filter(function(r){return r.scope===e&&r.shortcut===n});s.forEach(function(r){r&&r.method&&r.method()})})}var xe={getPressedKeyString:Wt,setScope:He,getScope:K,deleteScope:Jt,getPressedKeyCodes:qt,isPressed:Ht,filter:Qt,trigger:Zt,unbind:Xt,keyMap:V,modifier:w,modifierMap:ke};for(Q in xe)Object.prototype.hasOwnProperty.call(xe,Q)&&(x[Q]=xe[Q]);var Q;typeof window<"u"&&(Re=window.hotkeys,x.noConflict=function(n){return n&&window.hotkeys===x&&(window.hotkeys=Re),x},window.hotkeys=x);var Re;var Te=class extends E{};Te.debounces=[];var Me=class extends E{};Me.throttles=[];var es={enterFromClass:"enter",enterActiveClass:"enterStart",enterToClass:"enterEnd",leaveFromClass:"leave",leaveActiveClass:"leaveStart",leaveToClass:"leaveEnd"},ts={transitioned:!1,hiddenClass:"hidden",preserveOriginalClass:!0,removeToClasses:!0},Je=(n,e={})=>{var t,s,r;let i=n,o=i.element.dataset.transitionTarget,c;o&&(c=i[`${o}Target`]);let a=e?.element||c||i.element;if(!(a instanceof HTMLElement||a instanceof SVGElement))return;let l=a.dataset,b=parseInt(l.leaveAfter||"")||e.leaveAfter||0,{transitioned:p,hiddenClass:d,preserveOriginalClass:k,removeToClasses:g}=Object.assign({},ts,e),O=(t=i.enter)===null||t===void 0?void 0:t.bind(i),Fe=(s=i.leave)===null||s===void 0?void 0:s.bind(i),Ce=(r=i.toggleTransition)===null||r===void 0?void 0:r.bind(i);async function I(u){if(i.transitioned)return;i.transitioned=!0,O&&O(u);let v=T("enterFrom",e,l),M=T("enterActive",e,l),F=T("enterTo",e,l),C=T("leaveTo",e,l);d&&a.classList.remove(d),g||B(a,C),await Ne(a,v,M,F,d,k,g),b>0&&setTimeout(()=>{N(u)},b)}async function N(u){if(!i.transitioned)return;i.transitioned=!1,Fe&&Fe(u);let v=T("leaveFrom",e,l),M=T("leaveActive",e,l),F=T("leaveTo",e,l),C=T("enterTo",e,l);g||B(a,C),await Ne(a,v,M,F,d,k,g),d&&a.classList.add(d)}function Be(u){Ce&&Ce(u),i.transitioned?N():I()}async function Ne(u,v,M,F,C,Xe,Ye){let $=[];Xe&&(v.forEach(y=>u.classList.contains(y)&&y!==C&&$.push(y)),M.forEach(y=>u.classList.contains(y)&&y!==C&&$.push(y)),F.forEach(y=>u.classList.contains(y)&&y!==C&&$.push(y))),_(u,v),B(u,$),_(u,M),await ns(),B(u,v),_(u,F),await ss(u),B(u,M),Ye&&B(u,F),_(u,$)}function Ge(){i.transitioned=p,p?(d&&a.classList.remove(d),I()):(d&&a.classList.add(d),N())}function _(u,v){v.length>0&&u.classList.add(...v)}function B(u,v){v.length>0&&u.classList.remove(...v)}return Ge(),Object.assign(i,{enter:I,leave:N,toggleTransition:Be}),[I,N,Be]};function T(n,e,t){let s=`transition${n[0].toUpperCase()}${n.substr(1)}`,r=es[n],i=e[n]||t[s]||t[r]||" ";return rs(i)?[]:i.split(" ")}async function ss(n){return new Promise(e=>{let t=Number(getComputedStyle(n).transitionDuration.split(",")[0].replace("s",""))*1e3;setTimeout(()=>{e(t)},t)})}async function ns(){return new Promise(n=>{requestAnimationFrame(()=>{requestAnimationFrame(n)})})}function rs(n){return n.length===0||!n.trim()}var P=class extends E{initialize(){this.hide=this.hide.bind(this)}connect(){Je(this),this.hiddenValue===!1&&this.show()}show(){this.enter(),this.timeout=setTimeout(this.hide,this.delayValue)}async hide(){this.timeout&&clearTimeout(this.timeout),await this.leave(),this.element.remove()}};P.values={delay:{type:Number,default:3e3},hidden:{type:Boolean,default:!1}};var is=W.start(document.documentElement,{schema:ye});is.register("notification",P);})();
/*! Bundled license information:

stimulus-use/dist/index.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
//# sourceMappingURL=index.js.map
